<?php

namespace Cronixweb\Streamline\Models;

use Cronixweb\Streamline\Traits\StreamlineModel;

class Property extends StreamlineModel
{
    public function __construct(
        public readonly ?int $id = null,
        public readonly ?int $parent_id = null,
        public readonly ?int $search_position = null,
        public readonly ?string $local_phone = null,
        public readonly ?string $wifi_security_key = null,
        public readonly ?int $type_id = null,
        public readonly ?string $seo_title = null,
        public readonly ?string $seo_description = null,
        public readonly ?string $seo_keywords = null,
        public readonly ?string $addition_seo_text = null,
        public readonly ?string $mobile_seo_text = null,
        public readonly ?int $use_parent_different_owners_logic = null,
        public readonly ?string $floor = null,
        public readonly ?int $sale_enabled = null,
        public readonly ?int $coupons_enabled = null,
        public readonly ?int $discounts_enabled = null,
        public readonly ?int $longterm_enabled = null,
        public readonly ?int $shortterm_enabled = null,
        public readonly ?int $location_id = null,
        public readonly ?int $building_id = null,
        public readonly ?int $condo_type_id = null,
        public readonly ?string $name = null,
        public readonly ?string $gallery_code = null,
        public readonly ?int $status_id = null,
        public readonly ?string $image_ext = null,
        public readonly ?string $thumbnail_ext = null,
        public readonly ?string $unit_code = null,
        public readonly ?int $max_adults = null,
        public readonly ?int $max_occupants = null,
        public readonly ?int $max_pets = null,
        public readonly ?string $virtual_tour_iframe_src = null,
        public readonly ?string $virtual_tour_iframe_style = null,
        public readonly ?string $virtual_tour_image_overlay_url = null,
        public readonly ?string $google_map_overlay_url = null,
        public readonly ?float $latitude = null,
        public readonly ?float $longitude = null,
        public readonly ?string $comment = null,
        public readonly ?int $housekeeping_processor_id = null,
        public readonly ?float $location_latitude = null,
        public readonly ?float $location_longitude = null,
        public readonly ?int $square_foots = null,
        public readonly ?string $floor_plan_iframe_src = null,
        public readonly ?string $floor_plan_iframe_style = null,
        public readonly ?string $web_name = null,
        public readonly ?string $status_name = null,
        public readonly ?string $location_name = null,
        public readonly ?int $company_id = null,
        public readonly ?int $lodging_type_id = null,
        public readonly ?int $location_area_id = null,
        public readonly ?int $neighborhood_area_id = null,
        public readonly ?int $resort_area_id = null,
        public readonly ?int $home_type_id = null,
        public readonly ?string $address = null,
        public readonly ?string $city = null,
        public readonly ?string $zip = null,
        public readonly ?string $state_name = null,
        public readonly ?string $state_description = null,
        public readonly ?string $country_name = null,
        public readonly ?string $location_area_name = null,
        public readonly ?string $neighborhood_name = null,
        public readonly ?string $location_resort_name = null,
        public readonly ?string $short_description = null,
        public readonly ?string $location_image_ext = null,
        public readonly ?string $condo_type_name = null,
        public readonly ?int $default_unit_id = null,
        public readonly ?int $condo_type_group_id = null,
        public readonly ?float $bathrooms_number = null,
        public readonly ?int $bedrooms_number = null,
        public readonly ?string $condo_type_group_name = null,
        public readonly ?string $building_short_name = null,
        public readonly ?string $building_name = null,
        public readonly ?int $images_number = null,
        public readonly ?int $owning_type_id = null,
        public readonly ?string $seo_page_name = null,
        public readonly ?string $view_name = null,
        public readonly ?int $view_order = null,
        public readonly ?int $rating_count = null,
        public readonly ?float $rating_average = null,
        public readonly ?string $flyer_url = null,
        public readonly ?int $owning_result_table_order = null,
        public readonly ?string $property_rating_name = null,
        public readonly ?float $property_rating_points = null,
        public readonly ?string $home_type = null,
        public readonly ?string $email_quote_description = null,
        public readonly ?string $description = null,
        public readonly ?string $global_description = null,
        public readonly ?string $floor_name = null,
        public readonly ?int $not_show_on_website = null,
        public readonly ?string $creation_date = null,
        public readonly ?string $property_code = null,
        public readonly ?int $housekeeping_zone_id = null,
        public readonly ?string $region = null,
        public readonly ?string $community = null,
        public readonly ?int $online_bookings = null,
        public readonly ?string $default_image_path = null,
        public readonly ?string $default_thumbnail_path = null,
        public readonly ?string $original_description = null,
        public readonly ?string $variable_gate_code = null,
        public readonly ?string $variable_driving_directions = null,
        public readonly ?string $variable_golf_cart = null,
        public readonly ?string $variable_trash_pick_up_days = null,
        public readonly ?string $variable_random_text = null,
        public readonly ?string $variable_trash_pick_up = null,
        public readonly ?int $variable_number_of_vehicles = null,
        public readonly ?string $location_variable_resort_field_1 = null,
        public readonly ?string $night_gap_logic_enabled = null,
        public readonly ?int $night_gap_logic_minimal_nights = null,
    ) {}

    public static function parse(array $data): Property
    {
        $vtSrc = null; $vtStyle = null;
        if (isset($data['virtual_tour_url']['iframe'])) {
            $vtSrc = $data['virtual_tour_url']['iframe']['src'] ?? null;
            $vtStyle = $data['virtual_tour_url']['iframe']['style'] ?? null;
        }

        $fpSrc = null; $fpStyle = null;
        if (isset($data['floor_plan_url']['iframe'])) {
            $fpSrc = $data['floor_plan_url']['iframe']['src'] ?? null;
            $fpStyle = $data['floor_plan_url']['iframe']['style'] ?? null;
        }

        $f = fn($k) => $data[$k] ?? null;
        $toInt = function ($v) { return isset($v) && $v !== '' ? (int)$v : null; };
        $toFloat = function ($v) { return isset($v) && $v !== '' && is_numeric($v) ? (float)$v : null; };

        return new Property(
            id: $toInt($f('id')),
            parent_id: $toInt($f('parent_id')),
            search_position: $toInt($f('search_position')),
            local_phone: $f('local_phone'),
            wifi_security_key: $f('wifi_security_key'),
            type_id: $toInt($f('type_id')),
            seo_title: $f('seo_title'),
            seo_description: $f('seo_description'),
            seo_keywords: $f('seo_keywords'),
            addition_seo_text: $f('addition_seo_text'),
            mobile_seo_text: $f('mobile_seo_text'),
            use_parent_different_owners_logic: $toInt($f('use_parent_different_owners_logic')),
            floor: $f('floor'),
            sale_enabled: $toInt($f('sale_enabled')),
            coupons_enabled: $toInt($f('coupons_enabled')),
            discounts_enabled: $toInt($f('discounts_enabled')),
            longterm_enabled: $toInt($f('longterm_enabled')),
            shortterm_enabled: $toInt($f('shortterm_enabled')),
            location_id: $toInt($f('location_id')),
            building_id: $toInt($f('building_id')),
            condo_type_id: $toInt($f('condo_type_id')),
            name: $f('name'),
            gallery_code: $f('gallery_code'),
            status_id: $toInt($f('status_id')),
            image_ext: $f('image_ext'),
            thumbnail_ext: $f('thumbnail_ext'),
            unit_code: $f('unit_code'),
            max_adults: $toInt($f('max_adults')),
            max_occupants: $toInt($f('max_occupants')),
            max_pets: $toInt($f('max_pets')),
            virtual_tour_iframe_src: $vtSrc,
            virtual_tour_iframe_style: $vtStyle,
            virtual_tour_image_overlay_url: $f('virtual_tour_image_overlay_url'),
            google_map_overlay_url: $f('google_map_overlay_url'),
            latitude: $toFloat($f('latitude')),
            longitude: $toFloat($f('longitude')),
            comment: $f('comment'),
            housekeeping_processor_id: $toInt($f('housekeeping_processor_id')),
            location_latitude: $toFloat($f('location_latitude')),
            location_longitude: $toFloat($f('location_longitude')),
            square_foots: $toInt($f('square_foots')),
            floor_plan_iframe_src: $fpSrc,
            floor_plan_iframe_style: $fpStyle,
            web_name: $f('web_name'),
            status_name: $f('status_name'),
            location_name: $f('location_name'),
            company_id: $toInt($f('company_id')),
            lodging_type_id: $toInt($f('lodging_type_id')),
            location_area_id: $toInt($f('location_area_id')),
            neighborhood_area_id: $toInt($f('neighborhood_area_id')),
            resort_area_id: $toInt($f('resort_area_id')),
            home_type_id: $toInt($f('home_type_id')),
            address: $f('address'),
            city: $f('city'),
            zip: $f('zip'),
            state_name: $f('state_name'),
            state_description: $f('state_description'),
            country_name: $f('country_name'),
            location_area_name: $f('location_area_name'),
            neighborhood_name: $f('neighborhood_name'),
            location_resort_name: $f('location_resort_name'),
            short_description: $f('short_description'),
            location_image_ext: $f('location_image_ext'),
            condo_type_name: $f('condo_type_name'),
            default_unit_id: $toInt($f('default_unit_id')),
            condo_type_group_id: $toInt($f('condo_type_group_id')),
            bathrooms_number: $toFloat($f('bathrooms_number')),
            bedrooms_number: $toInt($f('bedrooms_number')),
            condo_type_group_name: $f('condo_type_group_name'),
            building_short_name: $f('building_short_name'),
            building_name: $f('building_name'),
            images_number: $toInt($f('images_number')),
            owning_type_id: $toInt($f('owning_type_id')),
            seo_page_name: $f('seo_page_name'),
            view_name: $f('view_name'),
            view_order: $toInt($f('view_order')),
            rating_count: $toInt($f('rating_count')),
            rating_average: $toFloat($f('rating_average')),
            flyer_url: $f('flyer_url'),
            owning_result_table_order: $toInt($f('owning_result_table_order')),
            property_rating_name: $f('property_rating_name'),
            property_rating_points: $toFloat($f('property_rating_points')),
            home_type: $f('home_type'),
            email_quote_description: $f('email_quote_description'),
            description: $f('description'),
            global_description: $f('global_description'),
            floor_name: $f('floor_name'),
            not_show_on_website: $toInt($f('not_show_on_website')),
            creation_date: $f('creation_date'),
            property_code: $f('property_code'),
            housekeeping_zone_id: $toInt($f('housekeeping_zone_id')),
            region: $f('region'),
            community: $f('community'),
            online_bookings: $toInt($f('online_bookings')),
            default_image_path: $f('default_image_path'),
            default_thumbnail_path: $f('default_thumbnail_path'),
            original_description: $f('original_description'),
            variable_gate_code: $f('variable_gate_code'),
            variable_driving_directions: $f('variable_driving_directions'),
            variable_golf_cart: $f('variable_golf_cart'),
            variable_trash_pick_up_days: $f('variable_trash_pick_up_days'),
            variable_random_text: $f('variable_random_text'),
            variable_trash_pick_up: $f('variable_trash_pick_up'),
            variable_number_of_vehicles: $toInt($f('variable_number_of_vehicles')),
            location_variable_resort_field_1: $f('location_variable_resort_field_1'),
            night_gap_logic_enabled: $f('night_gap_logic_enabled'),
            night_gap_logic_minimal_nights: $toInt($f('night_gap_logic_minimal_nights')),
        );
    }
}